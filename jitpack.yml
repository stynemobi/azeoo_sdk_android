jdk:
  - openjdk17

before_install:
  - chmod +x gradlew

install:
  - ./gradlew clean
  - ./gradlew :AzeooSDK:preBuild
  # - mkdir -p build/AzeooSDK/libs
  # - cp -r libs/* build/AzeooSDK/libs/
  - mkdir -p build/libs
  - cp -r libs/com build/libs/
  - cp -r libs/dev build/libs/
  - cp -r libs/io build/libs/
  - ls -la build/libs/
  - ls -la build/libs/com/azeoo/sdk/
  - ls -la build/libs/io/flutter/plugins/sharedpreferences/
  - find build/libs -name "*.aar" | head -10
  - ls -la build/libs/io/flutter/plugins/sharedpreferences/shared_preferences_android_release/1.0/
  - ./gradlew :AzeooSDK:assembleRelease --no-daemon --stacktrace
  - ./gradlew :AzeooSDK:publishToMavenLocal --no-daemon --stacktrace

# env:
#   GRADLE_OPTS: -Dorg.gradle.daemon=false -Dorg.gradle.configureondemand=true -Dorg.gradle.jvmargs="-Xmx4g -XX:MaxMetaspaceSize=1g -XX:+HeapDumpOnOutOfMemoryError -Dfile.encoding=UTF-8"